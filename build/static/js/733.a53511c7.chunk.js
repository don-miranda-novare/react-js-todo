"use strict";(self.webpackChunkreact_js_todo=self.webpackChunkreact_js_todo||[]).push([[733],{7733:(e,t,a)=>{a.r(t),a.d(t,{Todo:()=>v,default:()=>A});var o=a(3969),r=a(4842),s=a(2504),i=a(2097),n=a(7536),d=a(6307),c=a(8403),l=a(5043),h=a(579);const u=e=>{let{todos:t,onUpdate:a,onDelete:s}=e;return(0,h.jsx)(o.A,{children:t.map(e=>(0,h.jsxs)(o.A,{sx:{display:"flex",flexDirection:"row",backgroundColor:"lightGray.main",padding:2,borderRadius:1,justifyContent:"flex-start",alignItems:"center",height:"40px",mb:1},children:[(0,h.jsx)(d.A,{checked:e.completed,onChange:t=>a(e.id,t)}),(0,h.jsx)(r.A,{variant:"h6",sx:{mr:2},children:e.task}),(0,h.jsx)(c.A,{title:"Delete",placement:"top",arrow:!0,children:(0,h.jsx)(i.A,{onClick:()=>s(e.id),variant:"contained",color:"primary",sx:{ml:"auto",width:"20px",minWidth:"20px",height:20,borderRadius:1},children:"\ud83d\uddd1"})})]},e.id))})};var m=a(4858),p=a(899),x=a(784),k=a(2073),j=a(6667),g=a(8279),f=a(9208);const v=()=>{const[e]=(0,g.hD)(k.j2),t=p.Ik().shape({task:p.Yj().required("Task is required").max(50,"Task must be at most 50 characters long"),userId:p.Yj().optional().default((null===e||void 0===e?void 0:e.uid)||"unknown"),completed:p.zM().optional().default(!1)}),[a,d]=(0,l.useState)([]),[c,v]=(0,l.useState)(!1),[A,w]=(0,l.useState)(""),{register:b,handleSubmit:y,formState:{errors:C},reset:S}=(0,m.mN)({resolver:(0,x.t)(t)}),D=(0,j.rJ)(k.eY,"todos"),T=async()=>{const e=(await(0,j.GG)(D)).docs.map(e=>({id:e.id,...e.data()}));d(e)};return(0,l.useEffect)(()=>{T()},[]),e?(0,h.jsxs)(o.A,{children:[(0,h.jsx)(r.A,{variant:"h4",children:"Todo"}),(0,h.jsxs)("form",{onSubmit:y(async t=>{const a={task:t.task,userId:(null===e||void 0===e?void 0:e.uid)||"unknown",completed:!1};await(0,j.gS)(D,a),S(),T()}),children:[(0,h.jsxs)(o.A,{sx:{width:"500px",display:"flex",flexDirection:"row",gap:2,alignContent:"center",alignItems:"center"},children:[(0,h.jsx)(s.A,{...b("task"),placeholder:"Add a new task",fullWidth:!0,sx:{marginBottom:2},inputProps:{style:{fontSize:"1.25rem"}}}),(0,h.jsx)(i.A,{type:"submit",variant:"contained",color:"primary",sx:{height:25,width:90,borderRadius:1},children:"Add"})]}),C.task&&(0,h.jsx)(r.A,{variant:"h6",color:"error",sx:{mt:-2,mb:2},children:C.task.message})]}),(0,h.jsx)(o.A,{children:(0,h.jsx)(u,{todos:a,onUpdate:async(e,t)=>{d(t=>t.map(t=>t.id===e?{...t,completed:!t.completed}:t)),await(0,j.mZ)((0,j.H9)(D,e),{completed:t.target.checked}).then(()=>{w(`Task updated: ${e}`),v(!0)}).catch(e=>{console.error("Error updating task:",e)})},onDelete:async e=>{d(t=>t.filter(t=>t.id!==e)),await(0,j.kd)((0,j.H9)(D,e)).then(()=>{w(`Task deleted: ${e}`),v(!0)}).catch(e=>{console.error("Error deleting task:",e)})}})}),(0,h.jsx)(n.A,{open:c,autoHideDuration:2e3,onClose:()=>v(!1),anchorOrigin:{vertical:"bottom",horizontal:"right"},message:A})]}):(0,h.jsx)(f.c,{})},A=v},9208:(e,t,a)=>{a.d(t,{c:()=>i});var o=a(4842),r=a(2097),s=a(579);const i=()=>(0,s.jsxs)("div",{children:[(0,s.jsx)(o.A,{variant:"h6",children:"You do not have permission to access this page."}),(0,s.jsx)(r.A,{variant:"contained",onClick:()=>window.location.href="/",children:"Back to Home"})]})}}]);
//# sourceMappingURL=733.a53511c7.chunk.js.map